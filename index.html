<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” CyberChef Clone</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>ğŸ”“ CyberChef Clone</h1>
        <textarea id="input" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´ÙØ±Ø© Ù‡Ù†Ø§..."></textarea>

        <div class="operations">
            <label><input type="checkbox" value="base64"> Base64</label>
            <label><input type="checkbox" value="url"> URL</label>
            <label><input type="checkbox" value="hex"> Hex</label>
            <label><input type="checkbox" value="rot13"> ROT13</label>
        </div>

        <button id="runButton">ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</button>

        <h3>ğŸ” Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªÙ†ÙÙŠØ°:</h3>
        <div id="steps" class="steps"></div>

        <h3>ğŸ‰ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:</h3>
        <textarea id="result" readonly></textarea>
    </div>

    <script>
        // ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Base64
        function decodeBase64(data) {
            try {
                return atob(data);
            } catch {
                return "[Base64] âŒ Ø®Ø·Ø£: Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ§Ù„Ø­Ø©";
            }
        }

        // ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… URL
        function decodeURL(data) {
            try {
                return decodeURIComponent(data);
            } catch {
                return "[URL] âŒ Ø®Ø·Ø£: Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ§Ù„Ø­Ø©";
            }
        }

        // ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Hex
        function decodeHex(data) {
            try {
                const hex = data.replace(/[^0-9a-fA-F]/g, '');
                if (hex.length % 2 !== 0) throw new Error();
                return hex.match(/.{2}/g).map(byte => String.fromCharCode(parseInt(byte, 16))).join('');
            } catch {
                return "[Hex] âŒ Ø®Ø·Ø£: Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ§Ù„Ø­Ø©";
            }
        }

        // ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ROT13
        function decodeRot13(data) {
            return data.replace(/[a-zA-Z]/g, c =>
                String.fromCharCode(
                    (c <= 'Z' ? 90 : 122) >= (c = c.charCodeAt(0) + 13) ? c : c - 26
                )
            );
        }

        // ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
        const operations = {
            base64: decodeBase64,
            url: decodeURL,
            hex: decodeHex,
            rot13: decodeRot13,
        };

        // ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
        function run() {
            const input = document.getElementById("input").value.trim();
            const selectedOperations = Array.from(document.querySelectorAll("input[type=checkbox]:checked"))
                                            .map(cb => cb.value);

            if (!input) {
                alert("âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø´ÙØ±Ø©!");
                return;
            }

            if (selectedOperations.length === 0) {
                alert("âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù…Ù„ÙŠØ© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„!");
                return;
            }

            let current = input;
            let outputSteps = "";

            for (const operation of selectedOperations) {
                const before = current;
                current = operations[operation](current);
                outputSteps += `
                    <div class="step">
                        <b>ğŸ”§ ${operation.toUpperCase()}</b><br>
                        <i>Ù‚Ø¨Ù„:</i> ${before}<br>
                        <i>Ø¨Ø¹Ø¯:</i> ${current}<br><hr>
                    </div>
                `;
            }

            document.getElementById("steps").innerHTML = outputSteps;
            document.getElementById("result").value = current;
        }

        // Ø±Ø¨Ø· Ø§Ù„Ø²Ø± Ø¨ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ´ØºÙŠÙ„
        document.getElementById("runButton").addEventListener("click", run);
    </script>
</body>
</html>
